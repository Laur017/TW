<!DOCTYPE html>
<html lang="en">

<!--     -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denumirea</title>
    <link rel="icon" href="../../Assets/logo2.png" type="image/x-icon">
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="download_page.css">
    <script src="./server/chatScript.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
        integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />

</head>

<body>
    <div class="header nav" id="header">
        <div class="navbar-wrapper">
            <h2>Denumirea</h2>
            <nav role="navigation" id="navigation">
                <a class="nav-minimized" id="dropdownButton" onclick="showDropdown()">
                    <i class="fa fa-bars"></i>
                </a>
                <ul id="links" class="navLinks">
                    <li><a href="#">Menu 1</a></li>
                    <li><a href="#">Menu 2</a></li>
                    <li><a href="#">Menu 3</a></li>
                </ul>
            </nav>
        </div>
    </div>
    <div class="space">
        <img src="../../Assets/logo-circle.png" alt="logo">
        <h2>Configure the download</h2>

        <form onsubmit="submitForm(event)">
            <div id="select_color">
                <div id="select-box">
                    <input type="checkbox" id="options-view-button">
                    <div id="select-button" class="brd">
                        <div id="selected-value">
                            <span>Select your color</span>
                        </div>
                        <div id="chevrons">
                            <i class="fas fa-chevron-up"></i>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    <div id="options">
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="codepen">
                            <input class="s-c bottom" type="radio" name="platform" value="codepen">
                            <i id="c1" class="fas fa-circle"></i>
                            <span class="label">Black</span>
                            <span id="a1" class="opt-val">Black</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="dribbble">
                            <input class="s-c bottom" type="radio" name="platform" value="dribbble">
                            <i id="c2" class="fas fa-circle"></i>
                            <span class="label">Pink</span>
                            <span id="a2" class="opt-val">Pink</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="behance">
                            <input class="s-c bottom" type="radio" name="platform" value="behance">
                            <i id="c3" class="fas fa-circle"></i>
                            <span class="label">Blue</span>
                            <span id="a3" class="opt-val">Blue</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="hackerrank">
                            <input class="s-c bottom" type="radio" name="platform" value="hackerrank">
                            <i id="c4" class="fas fa-circle"></i>
                            <span class="label">Green</span>
                            <span id="a4" class="opt-val">Green</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="stackoverflow">
                            <input class="s-c bottom" type="radio" name="platform" value="stackoverflow">
                            <i id="c5" class="fas fa-circle"></i>
                            <span class="label">Yellow</span>
                            <span id="a5" class="opt-val">Yellow</span>
                        </div>

                        <div id="option-bg"></div>
                    </div>
                </div>


            </div>

            <div id="select_position">
                <div id="select-box">
                    <input type="checkbox" id="options-view-button">
                    <div id="select-button" class="brd">
                        <div id="selected-value">
                            <span>Select your position</span>
                        </div>
                        <div id="chevrons">
                            <i class="fas fa-chevron-up"></i>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                    <div id="options">
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="codepen">
                            <input class="s-c bottom" type="radio" name="platform" value="codepen">

                            <span class="label">↗ Top-Right</span>
                            <span id="a1" class="opt-val">Top-Right</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="dribbble">
                            <input class="s-c bottom" type="radio" name="platform" value="dribbble">

                            <span class="label"> → Right</span>
                            <span id="a2" class="opt-val">Right</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="behance">
                            <input class="s-c bottom" type="radio" name="platform" value="behance">

                            <span class="label">↘ Bottom-Right</span>
                            <span id="a3" class="opt-val">Bottom-Right</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="codepen">
                            <input class="s-c bottom" type="radio" name="platform" value="codepen">

                            <span class="label">↖ Top-Left</span>
                            <span id="a1" class="opt-val">Top-Left</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="dribbble">
                            <input class="s-c bottom" type="radio" name="platform" value="dribbble">

                            <span class="label">← Left</span>
                            <span id="a2" class="opt-val">Left</span>
                        </div>
                        <div class="option">
                            <input class="s-c top" type="radio" name="platform" value="behance">
                            <input class="s-c bottom" type="radio" name="platform" value="behance">

                            <span class="label">↙ Bottom-Left</span>
                            <span id="a3" class="opt-val">Bottom-Left</span>
                        </div>

                        <div id="option-bg"></div>

                    </div>
                </div>
            </div>


            <button type="submit">DOWNLOAD <i class="fas fa-file-download"></i></button>

        </form>>

    </div>
    <script>
        const ws = new WebSocket("ws://localhost:8882");
        var positionHoriz, positionVert, color;
        form = document.getElementById("select_color")
        var scriptContent;

        const downloadToFile = (content, filename, contentType) => {
            const a = document.createElement('a');
            const file = new Blob([content], { type: contentType });

            a.href = URL.createObjectURL(file);
            a.download = filename;
            a.click();

            URL.revokeObjectURL(a.href);
        };



        // sa zicem ca am luat valorile din form
        positionHoriz = "right";
        positionVert = "top";
        color = "blue";

        ws.addEventListener("open", () => {
            console.log("We connected!");

            ws.send(positionHoriz);
            ws.send(positionVert);
            ws.send(color);

        })

        ws.addEventListener("message", data => {
            scriptContent = data.data;
            //console.log("the script: "+ scriptContent);
            // downloadToFile(scriptContent, 'my-new-file.js', 'text/plain');

        })

        function sendValues(culoare) {
            alert(culoare);
        }

        function submitForm(e) {

            e.preventDefault();
            //console.log(e.target.elements.test.value);

            ws.send("sendScript");


            //form1 = document.getElementById("select_color");
            //var formData = new FormData(form1);
            //alert(formData.get('selected-value'));

            //form1.submit();

            // document.getElementById("select_position").submit();
        }
    </script>

</body>

</html>